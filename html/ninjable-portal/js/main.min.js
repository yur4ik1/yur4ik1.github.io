const avatarBtn=document.querySelector(".avatar"),menuPopup=document.querySelector(".header__popup-menu");avatarBtn&&menuPopup&&(avatarBtn.addEventListener("click",()=>{menuPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=menuPopup.contains(e.target),o=avatarBtn.contains(e.target);t||o||menuPopup.classList.remove("active")}));const notificationBtn=document.querySelector(".notification"),notificationPopup=document.querySelector(".header__popup-notification");notificationBtn&&notificationPopup&&(notificationBtn.addEventListener("click",()=>{notificationPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=notificationPopup.contains(e.target),o=notificationBtn.contains(e.target);t||o||notificationPopup.classList.remove("active")}));const infoBtn=document.querySelector(".profile__left-item.deactivate"),infoPopup=document.querySelector(".lock__popup");infoBtn&&infoPopup&&(infoBtn.addEventListener("click",()=>{infoPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=infoPopup.contains(e.target),o=infoBtn.contains(e.target);t||o||infoPopup.classList.remove("active")}));const maskInfoBtn=document.querySelector(".mask-info"),maskInfoPopup=document.querySelector(".mask__info-popup");maskInfoBtn&&maskInfoPopup&&(maskInfoBtn.addEventListener("click",()=>{maskInfoPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=maskInfoPopup.contains(e.target),o=maskInfoBtn.contains(e.target);t||o||maskInfoPopup.classList.remove("active")}));const passwordInput=document.getElementById("password"),passwordIcon=document.querySelector(".password-icon");passwordInput&&passwordIcon&&passwordIcon.addEventListener("click",(function(){"password"===passwordInput.type?(passwordInput.type="text",passwordIcon.classList.add("active")):(passwordInput.type="password",passwordIcon.classList.remove("active"))}));const profilePopup=document.querySelector(".profile__info-popup"),profilePopupOpen=document.querySelector(".info-btn"),profilePopupClose=document.querySelector(".close-popup");profilePopup&&profilePopupOpen&&(profilePopupOpen.addEventListener("click",()=>{profilePopup.classList.add("active")}),profilePopupClose.addEventListener("click",()=>{profilePopup.classList.remove("active")}));const attributesPopup=document.querySelector(".power__popup"),attributesPopupOpen=document.querySelector(".power"),attributesPopupClose=document.querySelector(".main__popup-close");attributesPopup&&attributesPopupOpen&&(attributesPopupOpen.addEventListener("click",()=>{attributesPopup.classList.add("active")}),attributesPopupClose.addEventListener("click",()=>{attributesPopup.classList.remove("active")}));const protectionPopup=document.querySelector(".protection__popup"),protectionPopupOpen=document.querySelector(".protection"),protectionPopupClose=document.querySelector(".protection-close");protectionPopup&&protectionPopupOpen&&(protectionPopupOpen.addEventListener("click",()=>{protectionPopup.classList.add("active")}),protectionPopupClose.addEventListener("click",()=>{protectionPopup.classList.remove("active")}));const speedPopup=document.querySelector(".speed__popup"),speedPopupOpen=document.querySelector(".speed"),speedPopupClose=document.querySelector(".speed-close");speedPopup&&speedPopupOpen&&(speedPopupOpen.addEventListener("click",()=>{speedPopup.classList.add("active")}),speedPopupClose.addEventListener("click",()=>{speedPopup.classList.remove("active")}));const donthaveBtn=document.querySelector(".donthave"),donthavePopup=document.querySelector(".donthave-popup");donthaveBtn&&donthavePopup&&(donthaveBtn.addEventListener("click",()=>{donthavePopup.classList.toggle("active"),donthaveBtn.classList.toggle("active")}),document.addEventListener("click",e=>{const t=donthavePopup.contains(e.target),o=donthaveBtn.contains(e.target);t||o||(donthavePopup.classList.remove("active"),donthaveBtn.classList.remove("active"))}));const popupInfoBtns=document.querySelectorAll(".attributes-info"),popupInfoElements=document.querySelectorAll(".attributes__popup-info");popupInfoBtns.forEach((e,t)=>{const o=popupInfoElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),n=e.contains(t.target);s||n||o.classList.remove("active")})});const exchangePopupBtns=document.querySelectorAll(".three"),exchangePopupElements=document.querySelectorAll(".exchange-popup");exchangePopupBtns.forEach((e,t)=>{const o=exchangePopupElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),n=e.contains(t.target);s||n||o.classList.remove("active")})});const dismantlePopupBtns=document.querySelectorAll(".dismantle"),dismantlePopupElements=document.querySelectorAll(".dismantle-popup");dismantlePopupBtns.forEach((e,t)=>{const o=dismantlePopupElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),n=e.contains(t.target);s||n||o.classList.remove("active")})});const rewardsPopup=document.querySelector(".rewards__pupup"),rewardsPopupOpen=document.querySelector(".coins"),rewardsPopupClose=document.querySelector(".rewards-close");rewardsPopup&&rewardsPopupOpen&&(rewardsPopupOpen.addEventListener("click",()=>{rewardsPopup.classList.add("active")}),rewardsPopupClose.addEventListener("click",()=>{rewardsPopup.classList.remove("active")}));const addSkillPopup=document.querySelector(".add__skill-popup"),addSkillOpen=document.querySelector(".add"),addSkillClose=document.querySelector(".add-skill-close");addSkillPopup&&addSkillOpen&&(addSkillOpen.addEventListener("click",()=>{addSkillPopup.classList.add("active")}),addSkillClose.addEventListener("click",()=>{addSkillPopup.classList.remove("active")}));const passiveSkillsPopup=document.querySelector(".passive__skills-popup"),passiveSkillsOpen=document.querySelector(".request"),passiveSkillsClose=document.querySelector(".passive__skills-close");passiveSkillsPopup&&passiveSkillsOpen&&(passiveSkillsOpen.addEventListener("click",()=>{passiveSkillsPopup.classList.add("active")}),passiveSkillsClose.addEventListener("click",()=>{passiveSkillsPopup.classList.remove("active")}));const wisdomScrollPopup=document.querySelector(".wisdom__scroll-popup"),wisdomScrollOpen=document.querySelector(".wisdom__scroll-btn"),wisdomScrollClose=document.querySelector(".wisdom__scroll-close");wisdomScrollPopup&&wisdomScrollOpen&&(wisdomScrollOpen.addEventListener("click",()=>{wisdomScrollPopup.classList.add("active")}),wisdomScrollClose.addEventListener("click",()=>{wisdomScrollPopup.classList.remove("active")}));const inProgressPopup=document.querySelector(".in-progress-popup"),inProgressOpen=document.querySelectorAll(".in-progress-btn"),inProgressClose=document.querySelector(".in-progress-close");inProgressPopup&&inProgressOpen&&(inProgressOpen.forEach(e=>{e.addEventListener("click",()=>{inProgressPopup.classList.add("active")})}),inProgressClose.addEventListener("click",()=>{inProgressPopup.classList.remove("active")}));const editor=document.getElementById("editor"),boldButton=document.querySelector(".bold-btn"),italicButton=document.querySelector(".italic-btn"),underlinedButton=document.querySelector(".underlined-btn"),bulletedButton=document.querySelector(".bulleted-btn"),checkboxButton=document.querySelector(".checkbox-btn"),linkButton=document.querySelector(".link-btn"),atButton=document.querySelector(".at-btn"),smileButton=document.querySelector(".smile-btn");function wrapSelectedTextWithTag(e){const t=window.getSelection();if(t.rangeCount>0){const o=t.getRangeAt(0),s=document.createElement(e);s.appendChild(o.extractContents()),o.insertNode(s)}}function removeTagFromSelectedText(e){const t=window.getSelection();if(t.rangeCount>0){const e=t.getRangeAt(0),o=document.createElement("div");o.appendChild(e.extractContents()),e.insertNode(o.firstChild),o.parentNode.removeChild(o)}}function hasSelection(){return window.getSelection().toString().length>0}function updateButtonStates(){boldButton.classList.toggle("active",hasSelection()),italicButton.classList.toggle("active",hasSelection()),underlinedButton.classList.toggle("active",hasSelection()),bulletedButton.classList.toggle("active",hasSelection()),checkboxButton.classList.toggle("active",hasSelection()),linkButton.classList.toggle("active",hasSelection()),atButton.classList.toggle("active",hasSelection()),smileButton.classList.toggle("active",hasSelection())}boldButton.addEventListener("click",()=>{document.queryCommandState("bold")?(document.execCommand("bold",!1,null),removeTagFromSelectedText("strong"),boldButton.classList.remove("active")):(document.execCommand("bold",!1,null),wrapSelectedTextWithTag("strong"),boldButton.classList.add("active"))}),italicButton.addEventListener("click",()=>{document.execCommand("italic",!1,null),updateButtonStates()}),underlinedButton.addEventListener("click",()=>{document.execCommand("underline",!1,null),updateButtonStates()}),bulletedButton.addEventListener("click",()=>{document.execCommand("insertUnorderedList",!1,null),updateButtonStates()}),checkboxButton.addEventListener("click",()=>{const e=document.createElement("input");e.type="checkbox";const t=document.createElement("label"),o=document.createElement("li");o.appendChild(e),o.appendChild(t);const s=window.getSelection();if(s.rangeCount>0){const e=s.getRangeAt(0),t=document.createElement("ul");t.appendChild(o),e.insertNode(t)}updateButtonStates()}),linkButton.addEventListener("click",()=>{const e=prompt("Введіть URL:");e&&document.execCommand("createLink",!1,e),updateButtonStates()}),atButton.addEventListener("click",()=>{const e=document.createElement("span");e.className="at",e.textContent="@";const t=window.getSelection();if(t.rangeCount>0){t.getRangeAt(0).insertNode(e)}updateButtonStates()}),smileButton.addEventListener("click",()=>{document.execCommand("insertText",!1,"😊"),updateButtonStates()}),editor.addEventListener("mouseup",()=>{updateButtonStates()}),editor.addEventListener("keyup",()=>{updateButtonStates()});let selectAll=document.querySelectorAll(".filter-select");selectAll.forEach((function(e){let t=e.querySelector(".select-selected"),o=e.querySelector(".select-items");t&&t.addEventListener("click",(function(){o&&o.classList.contains("select-hide")?(o.classList.remove("select-hide"),e.classList.add("active")):o&&(o.classList.add("select-hide"),e.classList.remove("active"))}))}));const rewardsImgTrigger=document.querySelector(".rewards-img-trigger"),bigPhotoPopup=document.querySelector(".big__photo-popup");rewardsImgTrigger&&bigPhotoPopup&&(rewardsImgTrigger.addEventListener("click",(function(){bigPhotoPopup.classList.add("active")})),document.addEventListener("click",(function(e){bigPhotoPopup.contains(e.target)||e.target===rewardsImgTrigger||bigPhotoPopup.classList.remove("active")})));const items=document.querySelectorAll(".tasks__list-item");if(items){const e=["../img/tasks-yellow.webp","../img/tasks-green.webp","../img/tasks-white.webp","../img/tasks-purple.webp","../img/tasks-red.webp","../img/tasks-black.webp"],t=[{nameColor:"#866639",priceImage:"../img/tasks-price-yellow.svg",textBackground:"#EAC185",textShadow:"0px 0px 10px 5px rgba(140, 98, 39, 0.4)"},{nameColor:"#27433E",priceImage:"../img/tasks-price-green.svg",textBackground:"rgba(90, 147, 138, 0.4)",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(63, 101, 95, 0.65)"},{nameColor:"#A0A0A0",priceImage:"../img/tasks-price-white.svg",textBackground:"#ECECEC",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(198, 198, 198, 0.8)"},{nameColor:"#444561",priceImage:"../img/tasks-price-purple.svg",textBackground:"#8183B8",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(93, 95, 139, 0.8)"},{nameColor:"#74423E",priceImage:"../img/tasks-price-red.svg",textBackground:"rgba(190, 117, 112, 0.3)",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(136, 85, 82, 0.6)"},{nameColor:"#A0A0A0",priceImage:"../img/tasks-price-black.svg",textBackground:"#242C3E",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(22, 26, 36, 0.8)"}];items.forEach((o,s)=>{const n=s%e.length;o.style.background=`url('${e[n]}') no-repeat center top / cover`;const c=s%t.length,i=t[c];o.querySelector(".name").style.color=i.nameColor,o.querySelector(".text a").style.background=i.textBackground,o.querySelector(".text a").style.boxShadow=i.textShadow,(s+1)%3==0&&(o.querySelector(".text a").style.color="#A0A0A0",o.querySelector(".price span").style.color="#A0A0A0",o.querySelector(".text p").style.color="#A0A0A0");const l=document.createElement("span");l.classList.add("price-image"),l.style.background=`url('${i.priceImage}') no-repeat center top / cover`,o.querySelector(".price").insertBefore(l,o.querySelector(".price").firstChild)})}let selectElements=document.getElementsByClassName("custom-select");for(let e=0;e<selectElements.length;e++){let t=selectElements[e],o=t.getElementsByClassName("select-selected")[0],s=t.getElementsByClassName("select-items")[0],n=s.getElementsByClassName("select-option");o.addEventListener("click",(function(){this.classList.toggle("select-arrow-active"),s.classList.toggle("select-hide"),this.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}));for(let e=0;e<n.length;e++)n[e].addEventListener("click",(function(){let e=this.innerHTML;o.innerHTML=e,o.classList.remove("select-arrow-active"),s.classList.add("select-hide"),o.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}))}const newCustomSelects=document.querySelectorAll(".new__custom-select");function closeAllSelectsExcept(e){newCustomSelects.forEach(t=>{t!==e&&t.classList.contains("open")&&t.classList.remove("open")})}newCustomSelects.forEach(e=>{const t=e.querySelector(".new__custom-select__trigger"),o=e.querySelector(".new__custom-options"),s=e.querySelectorAll(".new__custom-option"),n=e.querySelector(".custom-scrollbar"),c=document.createElement("div");function i(){const e=o.scrollTop,t=o.clientHeight,s=o.scrollHeight,i=n.clientHeight,l=Math.max(t/s*i,20),a=e/(s-t)*(i-l);c.style.height=l+"px",c.style.top=a+"px"}c.classList.add("custom-scrollbar-thumb"),n.appendChild(c),t.addEventListener("click",()=>{e.classList.contains("open")?e.classList.remove("open"):(closeAllSelectsExcept(e),e.classList.add("open"))}),o.addEventListener("scroll",i),s.forEach(t=>{t.addEventListener("click",o=>{if(e.closest(".skills-filter-select")){const o=e.querySelectorAll(".new__custom-option.selected"),s=Array.from(o).map(e=>e.getAttribute("data-value")),n=t.getAttribute("data-value"),c=e.querySelector(".new__custom-select__trigger"),i=e.closest(".new__custom-select-wrapper").querySelector(".skills-tags-list");if(s.includes(n))return;const l=document.createElement("div");l.classList.add("tag-item");const a=document.createElement("p");a.textContent=t.textContent;const r=document.createElement("button");r.classList.add("remove"),l.appendChild(a),l.appendChild(r),i.appendChild(l),addRemoveButtonListener(r),t.classList.add("selected"),c.textContent="Selected"}else{t.getAttribute("data-value");const o=e.querySelector(".new__custom-select__trigger");e.closest(".acievements-select")?o.textContent="icon":o.textContent=t.textContent,e.classList.remove("open"),e.classList.contains("filter-select-scroll")&&(e.classList.add("open"),o.textContent="Selected")}})}),c.addEventListener("mousedown",e=>{const t=e.clientY-c.getBoundingClientRect().top,s=n.clientHeight-c.clientHeight;function i(e){const i=e.clientY-n.getBoundingClientRect().top-t;i<0?(c.style.top="0",o.scrollTop=0):i>s?(c.style.top=s+"px",o.scrollTop=o.scrollHeight):(c.style.top=i+"px",o.scrollTop=i/s*(o.scrollHeight-o.clientHeight))}window.addEventListener("mousemove",i),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",e)}))}),i()});