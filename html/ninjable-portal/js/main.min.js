const avatarBtn=document.querySelector(".avatar"),menuPopup=document.querySelector(".header__popup-menu");avatarBtn&&menuPopup&&(avatarBtn.addEventListener("click",()=>{menuPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=menuPopup.contains(e.target),o=avatarBtn.contains(e.target);t||o||menuPopup.classList.remove("active")}));const notificationBtn=document.querySelector(".notification"),notificationPopup=document.querySelector(".header__popup-notification");notificationBtn&&notificationPopup&&(notificationBtn.addEventListener("click",()=>{notificationPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=notificationPopup.contains(e.target),o=notificationBtn.contains(e.target);t||o||notificationPopup.classList.remove("active")}));const infoBtn=document.querySelector(".profile__left-item.deactivate"),infoPopup=document.querySelector(".lock__popup");infoBtn&&infoPopup&&(infoBtn.addEventListener("click",()=>{infoPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=infoPopup.contains(e.target),o=infoBtn.contains(e.target);t||o||infoPopup.classList.remove("active")}));const maskInfoBtn=document.querySelector(".mask-info"),maskInfoPopup=document.querySelector(".mask__info-popup");maskInfoBtn&&maskInfoPopup&&(maskInfoBtn.addEventListener("click",()=>{maskInfoPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=maskInfoPopup.contains(e.target),o=maskInfoBtn.contains(e.target);t||o||maskInfoPopup.classList.remove("active")}));const passwordInput=document.getElementById("password"),passwordIcon=document.querySelector(".password-icon");passwordInput&&passwordIcon&&passwordIcon.addEventListener("click",(function(){"password"===passwordInput.type?(passwordInput.type="text",passwordIcon.classList.add("active")):(passwordInput.type="password",passwordIcon.classList.remove("active"))}));const profilePopup=document.querySelector(".profile__info-popup"),profilePopupOpen=document.querySelector(".info-btn"),profilePopupClose=document.querySelector(".close-popup");profilePopup&&profilePopupOpen&&(profilePopupOpen.addEventListener("click",()=>{profilePopup.classList.add("active")}),profilePopupClose.addEventListener("click",()=>{profilePopup.classList.remove("active")}));const attributesPopup=document.querySelector(".power__popup"),attributesPopupOpen=document.querySelector(".power"),attributesPopupClose=document.querySelector(".main__popup-close");attributesPopup&&attributesPopupOpen&&(attributesPopupOpen.addEventListener("click",()=>{attributesPopup.classList.add("active")}),attributesPopupClose.addEventListener("click",()=>{attributesPopup.classList.remove("active")}));const protectionPopup=document.querySelector(".protection__popup"),protectionPopupOpen=document.querySelector(".protection"),protectionPopupClose=document.querySelector(".protection-close");protectionPopup&&protectionPopupOpen&&(protectionPopupOpen.addEventListener("click",()=>{protectionPopup.classList.add("active")}),protectionPopupClose.addEventListener("click",()=>{protectionPopup.classList.remove("active")}));const speedPopup=document.querySelector(".speed__popup"),speedPopupOpen=document.querySelector(".speed"),speedPopupClose=document.querySelector(".speed-close");speedPopup&&speedPopupOpen&&(speedPopupOpen.addEventListener("click",()=>{speedPopup.classList.add("active")}),speedPopupClose.addEventListener("click",()=>{speedPopup.classList.remove("active")}));const donthaveBtn=document.querySelector(".donthave"),donthavePopup=document.querySelector(".donthave-popup");donthaveBtn&&donthavePopup&&(donthaveBtn.addEventListener("click",()=>{donthavePopup.classList.toggle("active"),donthaveBtn.classList.toggle("active")}),document.addEventListener("click",e=>{const t=donthavePopup.contains(e.target),o=donthaveBtn.contains(e.target);t||o||(donthavePopup.classList.remove("active"),donthaveBtn.classList.remove("active"))}));const popupInfoBtns=document.querySelectorAll(".attributes-info"),popupInfoElements=document.querySelectorAll(".attributes__popup-info");popupInfoBtns.forEach((e,t)=>{const o=popupInfoElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),c=e.contains(t.target);s||c||o.classList.remove("active")})});const exchangePopupBtns=document.querySelectorAll(".three"),exchangePopupElements=document.querySelectorAll(".exchange-popup");exchangePopupBtns.forEach((e,t)=>{const o=exchangePopupElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),c=e.contains(t.target);s||c||o.classList.remove("active")})});const dismantlePopupBtns=document.querySelectorAll(".dismantle"),dismantlePopupElements=document.querySelectorAll(".dismantle-popup");dismantlePopupBtns.forEach((e,t)=>{const o=dismantlePopupElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),c=e.contains(t.target);s||c||o.classList.remove("active")})});const rewardsPopup=document.querySelector(".rewards__pupup"),rewardsPopupOpen=document.querySelector(".coins"),rewardsPopupClose=document.querySelector(".rewards-close");rewardsPopup&&rewardsPopupOpen&&(rewardsPopupOpen.addEventListener("click",()=>{rewardsPopup.classList.add("active")}),rewardsPopupClose.addEventListener("click",()=>{rewardsPopup.classList.remove("active")}));let select=document.querySelector(".filter-select"),selectSelected=select?select.querySelector(".select-selected"):null,selectItems=select?select.querySelector(".select-items"):null;selectSelected&&selectSelected.addEventListener("click",(function(){selectItems&&selectItems.classList.contains("select-hide")?(selectItems.classList.remove("select-hide"),select.classList.add("active")):selectItems&&(selectItems.classList.add("select-hide"),select.classList.remove("active"))}));const rewardsImgTrigger=document.querySelector(".rewards-img-trigger"),bigPhotoPopup=document.querySelector(".big__photo-popup");rewardsImgTrigger.addEventListener("click",(function(){bigPhotoPopup.classList.add("active")})),document.addEventListener("click",(function(e){bigPhotoPopup.contains(e.target)||e.target===rewardsImgTrigger||bigPhotoPopup.classList.remove("active")}));let selectElements=document.getElementsByClassName("custom-select");for(let e=0;e<selectElements.length;e++){let t=selectElements[e],o=t.getElementsByClassName("select-selected")[0],s=t.getElementsByClassName("select-items")[0],c=s.getElementsByClassName("select-option");o.addEventListener("click",(function(){this.classList.toggle("select-arrow-active"),s.classList.toggle("select-hide"),this.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}));for(let e=0;e<c.length;e++)c[e].addEventListener("click",(function(){let e=this.innerHTML;o.innerHTML=e,o.classList.remove("select-arrow-active"),s.classList.add("select-hide"),o.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}))}const newCustomSelects=document.querySelectorAll(".new__custom-select");function closeAllSelectsExcept(e){newCustomSelects.forEach(t=>{t!==e&&t.classList.contains("open")&&t.classList.remove("open")})}newCustomSelects.forEach(e=>{const t=e.querySelector(".new__custom-select__trigger"),o=e.querySelector(".new__custom-options"),s=e.querySelectorAll(".new__custom-option"),c=e.querySelector(".custom-scrollbar"),n=document.createElement("div");function i(){const e=o.scrollTop,t=o.clientHeight,s=o.scrollHeight,i=c.clientHeight,l=Math.max(t/s*i,20),a=e/(s-t)*(i-l);n.style.height=l+"px",n.style.top=a+"px"}n.classList.add("custom-scrollbar-thumb"),c.appendChild(n),t.addEventListener("click",()=>{e.classList.contains("open")?e.classList.remove("open"):(closeAllSelectsExcept(e),e.classList.add("open"))}),o.addEventListener("scroll",i),s.forEach(t=>{t.addEventListener("click",o=>{if(e.closest(".skills-filter-select")){const o=e.querySelectorAll(".new__custom-option.selected"),s=Array.from(o).map(e=>e.getAttribute("data-value")),c=t.getAttribute("data-value"),n=e.querySelector(".new__custom-select__trigger"),i=e.closest(".new__custom-select-wrapper").querySelector(".skills-tags-list");if(s.includes(c))return;const l=document.createElement("div");l.classList.add("tag-item");const a=document.createElement("p");a.textContent=t.textContent;const p=document.createElement("button");p.classList.add("remove"),l.appendChild(a),l.appendChild(p),i.appendChild(l),addRemoveButtonListener(p),t.classList.add("selected"),n.textContent="Type here to search for Clan..."}else{t.getAttribute("data-value");const o=e.querySelector(".new__custom-select__trigger");e.closest(".acievements-select")?o.textContent="icon":o.textContent=t.textContent,e.classList.remove("open"),e.classList.contains("filter-select-scroll")&&(e.classList.add("open"),o.textContent="Type here to search for Clan...")}})}),n.addEventListener("mousedown",e=>{const t=e.clientY-n.getBoundingClientRect().top,s=c.clientHeight-n.clientHeight;function i(e){const i=e.clientY-c.getBoundingClientRect().top-t;i<0?(n.style.top="0",o.scrollTop=0):i>s?(n.style.top=s+"px",o.scrollTop=o.scrollHeight):(n.style.top=i+"px",o.scrollTop=i/s*(o.scrollHeight-o.clientHeight))}window.addEventListener("mousemove",i),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",e)}))}),i()});