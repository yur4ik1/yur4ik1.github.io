const avatarBtn=document.querySelector(".avatar"),menuPopup=document.querySelector(".header__popup-menu");avatarBtn&&menuPopup&&(avatarBtn.addEventListener("click",()=>{menuPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=menuPopup.contains(e.target),o=avatarBtn.contains(e.target);t||o||menuPopup.classList.remove("active")}));const notificationBtn=document.querySelector(".notification"),notificationPopup=document.querySelector(".header__popup-notification");notificationBtn&&notificationPopup&&(notificationBtn.addEventListener("click",()=>{notificationPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=notificationPopup.contains(e.target),o=notificationBtn.contains(e.target);t||o||notificationPopup.classList.remove("active")}));const infoBtn=document.querySelector(".profile__left-item.deactivate"),infoPopup=document.querySelector(".lock__popup");infoBtn&&infoPopup&&(infoBtn.addEventListener("click",()=>{infoPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=infoPopup.contains(e.target),o=infoBtn.contains(e.target);t||o||infoPopup.classList.remove("active")}));const maskInfoBtn=document.querySelector(".mask-info"),maskInfoPopup=document.querySelector(".mask__info-popup");maskInfoBtn&&maskInfoPopup&&(maskInfoBtn.addEventListener("click",()=>{maskInfoPopup.classList.toggle("active")}),document.addEventListener("click",e=>{const t=maskInfoPopup.contains(e.target),o=maskInfoBtn.contains(e.target);t||o||maskInfoPopup.classList.remove("active")}));const passwordInput=document.getElementById("password"),passwordIcon=document.querySelector(".password-icon");passwordInput&&passwordIcon&&passwordIcon.addEventListener("click",(function(){"password"===passwordInput.type?(passwordInput.type="text",passwordIcon.classList.add("active")):(passwordInput.type="password",passwordIcon.classList.remove("active"))}));const profilePopup=document.querySelector(".profile__info-popup"),profilePopupOpen=document.querySelector(".info-btn"),profilePopupClose=document.querySelector(".close-popup");profilePopup&&profilePopupOpen&&(profilePopupOpen.addEventListener("click",()=>{profilePopup.classList.add("active")}),profilePopupClose.addEventListener("click",()=>{profilePopup.classList.remove("active")}));const attributesPopup=document.querySelector(".power__popup"),attributesPopupOpen=document.querySelector(".power"),attributesPopupClose=document.querySelector(".main__popup-close");attributesPopup&&attributesPopupOpen&&(attributesPopupOpen.addEventListener("click",()=>{attributesPopup.classList.add("active")}),attributesPopupClose.addEventListener("click",()=>{attributesPopup.classList.remove("active")}));const protectionPopup=document.querySelector(".protection__popup"),protectionPopupOpen=document.querySelector(".protection"),protectionPopupClose=document.querySelector(".protection-close");protectionPopup&&protectionPopupOpen&&(protectionPopupOpen.addEventListener("click",()=>{protectionPopup.classList.add("active")}),protectionPopupClose.addEventListener("click",()=>{protectionPopup.classList.remove("active")}));const speedPopup=document.querySelector(".speed__popup"),speedPopupOpen=document.querySelector(".speed"),speedPopupClose=document.querySelector(".speed-close");speedPopup&&speedPopupOpen&&(speedPopupOpen.addEventListener("click",()=>{speedPopup.classList.add("active")}),speedPopupClose.addEventListener("click",()=>{speedPopup.classList.remove("active")}));const donthaveBtn=document.querySelector(".donthave"),donthavePopup=document.querySelector(".donthave-popup");donthaveBtn&&donthavePopup&&(donthaveBtn.addEventListener("click",()=>{donthavePopup.classList.toggle("active"),donthaveBtn.classList.toggle("active")}),document.addEventListener("click",e=>{const t=donthavePopup.contains(e.target),o=donthaveBtn.contains(e.target);t||o||(donthavePopup.classList.remove("active"),donthaveBtn.classList.remove("active"))}));const popupInfoBtns=document.querySelectorAll(".attributes-info"),popupInfoElements=document.querySelectorAll(".attributes__popup-info");popupInfoBtns.forEach((e,t)=>{const o=popupInfoElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),c=e.contains(t.target);s||c||o.classList.remove("active")})});const exchangePopupBtns=document.querySelectorAll(".three"),exchangePopupElements=document.querySelectorAll(".exchange-popup");exchangePopupBtns.forEach((e,t)=>{const o=exchangePopupElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),c=e.contains(t.target);s||c||o.classList.remove("active")})});const dismantlePopupBtns=document.querySelectorAll(".dismantle"),dismantlePopupElements=document.querySelectorAll(".dismantle-popup");dismantlePopupBtns.forEach((e,t)=>{const o=dismantlePopupElements[t];e.addEventListener("click",()=>{o.classList.toggle("active")}),document.addEventListener("click",t=>{const s=o.contains(t.target),c=e.contains(t.target);s||c||o.classList.remove("active")})});const rewardsPopup=document.querySelector(".rewards__pupup"),rewardsPopupOpen=document.querySelector(".coins"),rewardsPopupClose=document.querySelector(".rewards-close");rewardsPopup&&rewardsPopupOpen&&(rewardsPopupOpen.addEventListener("click",()=>{rewardsPopup.classList.add("active")}),rewardsPopupClose.addEventListener("click",()=>{rewardsPopup.classList.remove("active")}));const addSkillPopup=document.querySelector(".add__skill-popup"),addSkillOpen=document.querySelector(".add"),addSkillClose=document.querySelector(".add-skill-close");addSkillPopup&&addSkillOpen&&(addSkillOpen.addEventListener("click",()=>{addSkillPopup.classList.add("active")}),addSkillClose.addEventListener("click",()=>{addSkillPopup.classList.remove("active")}));const passiveSkillsPopup=document.querySelector(".passive__skills-popup"),passiveSkillsOpen=document.querySelector(".request"),passiveSkillsClose=document.querySelector(".passive__skills-close");passiveSkillsPopup&&passiveSkillsOpen&&(passiveSkillsOpen.addEventListener("click",()=>{passiveSkillsPopup.classList.add("active")}),passiveSkillsClose.addEventListener("click",()=>{passiveSkillsPopup.classList.remove("active")}));const wisdomScrollPopup=document.querySelector(".wisdom__scroll-popup"),wisdomScrollOpen=document.querySelector(".wisdom__scroll-btn"),wisdomScrollClose=document.querySelector(".wisdom__scroll-close");wisdomScrollPopup&&wisdomScrollOpen&&(wisdomScrollOpen.addEventListener("click",()=>{wisdomScrollPopup.classList.add("active")}),wisdomScrollClose.addEventListener("click",()=>{wisdomScrollPopup.classList.remove("active")}));const inProgressPopup=document.querySelector(".in-progress-popup"),inProgressOpen=document.querySelectorAll(".in-progress-btn"),inProgressClose=document.querySelector(".in-progress-close");function handleBtnClick(e,t,o){e.stopPropagation(),o.classList.contains("active")||o.classList.add("active")}function handlePageClick(e,t,o){const s=t.some(t=>t.contains(e.target)),c=o.some(t=>e.target===t);s||c||t.forEach(e=>{e.classList.remove("active")})}inProgressPopup&&inProgressOpen&&(inProgressOpen.forEach(e=>{e.addEventListener("click",()=>{inProgressPopup.classList.add("active")})}),inProgressClose.addEventListener("click",()=>{inProgressPopup.classList.remove("active")}));const buttons=[{btn:document.querySelector(".delete-btn"),popup:document.querySelector(".task__delete-popup")},{btn:document.querySelector(".due-date-btn"),popup:document.querySelector(".date__popup")},{btn:document.querySelector(".priority-btn"),popup:document.querySelector(".priority__popup")},{btn:document.querySelector(".player-btn"),popup:document.querySelector(".player__popup")},{btn:document.querySelector(".status-btn"),popup:document.querySelector(".status__popup")}],commentsTitle=document.querySelector(".comments-title"),noCommentsPopup=document.querySelector(".no-comments-popup");buttons.push({btn:commentsTitle,popup:noCommentsPopup}),buttons.forEach(({btn:e,popup:t})=>{e.addEventListener("click",o=>handleBtnClick(o,e,t))});const allPopups=buttons.map(e=>e.popup),allButtons=buttons.map(e=>e.btn);document.addEventListener("click",e=>handlePageClick(e,allPopups,allButtons));const photoPopup=document.querySelector(".photo__popup"),photoOpen=document.querySelectorAll(".photo"),photoClose=document.querySelector(".close");photoPopup&&photoOpen&&(photoOpen.forEach(e=>{e.addEventListener("click",()=>{photoPopup.classList.add("active")})}),photoClose.addEventListener("click",()=>{photoPopup.classList.remove("active")}));let selectAll=document.querySelectorAll(".filter-select");selectAll.forEach((function(e){let t=e.querySelector(".select-selected"),o=e.querySelector(".select-items");t&&t.addEventListener("click",(function(){o&&o.classList.contains("select-hide")?(o.classList.remove("select-hide"),e.classList.add("active")):o&&(o.classList.add("select-hide"),e.classList.remove("active"))}))}));const rewardsImgTrigger=document.querySelector(".rewards-img-trigger"),bigPhotoPopup=document.querySelector(".big__photo-popup");rewardsImgTrigger&&bigPhotoPopup&&(rewardsImgTrigger.addEventListener("click",(function(){bigPhotoPopup.classList.add("active")})),document.addEventListener("click",(function(e){bigPhotoPopup.contains(e.target)||e.target===rewardsImgTrigger||bigPhotoPopup.classList.remove("active")})));const items=document.querySelectorAll(".tasks__list-item");if(items){const e=["../img/tasks-yellow.webp","../img/tasks-green.webp","../img/tasks-white.webp","../img/tasks-purple.webp","../img/tasks-red.webp","../img/tasks-black.webp"],t=[{nameColor:"#866639",priceImage:"../img/tasks-price-yellow.svg",textBackground:"#EAC185",textShadow:"0px 0px 10px 5px rgba(140, 98, 39, 0.4)"},{nameColor:"#27433E",priceImage:"../img/tasks-price-green.svg",textBackground:"rgba(90, 147, 138, 0.4)",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(63, 101, 95, 0.65)"},{nameColor:"#A0A0A0",priceImage:"../img/tasks-price-white.svg",textBackground:"#ECECEC",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(198, 198, 198, 0.8)"},{nameColor:"#444561",priceImage:"../img/tasks-price-purple.svg",textBackground:"#8183B8",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(93, 95, 139, 0.8)"},{nameColor:"#74423E",priceImage:"../img/tasks-price-red.svg",textBackground:"rgba(190, 117, 112, 0.3)",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(136, 85, 82, 0.6)"},{nameColor:"#A0A0A0",priceImage:"../img/tasks-price-black.svg",textBackground:"#242C3E",textShadow:"0vw 0vw 0.521vw 0.261vw rgba(22, 26, 36, 0.8)"}];items.forEach((o,s)=>{const c=s%e.length;o.style.background=`url('${e[c]}') no-repeat center top / cover`;const n=s%t.length,l=t[n];o.querySelector(".name").style.color=l.nameColor,o.querySelector(".text a").style.background=l.textBackground,o.querySelector(".text a").style.boxShadow=l.textShadow,(s+1)%3==0&&(o.querySelector(".text a").style.color="#A0A0A0",o.querySelector(".price span").style.color="#A0A0A0",o.querySelector(".text p").style.color="#A0A0A0");const i=document.createElement("span");i.classList.add("price-image"),i.style.background=`url('${l.priceImage}') no-repeat center top / cover`,o.querySelector(".price").insertBefore(i,o.querySelector(".price").firstChild)})}let selectElements=document.getElementsByClassName("custom-select");for(let e=0;e<selectElements.length;e++){let t=selectElements[e],o=t.getElementsByClassName("select-selected")[0],s=t.getElementsByClassName("select-items")[0],c=s.getElementsByClassName("select-option");o.addEventListener("click",(function(){this.classList.toggle("select-arrow-active"),s.classList.toggle("select-hide"),this.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}));for(let e=0;e<c.length;e++)c[e].addEventListener("click",(function(){let e=this.innerHTML;o.innerHTML=e,o.classList.remove("select-arrow-active"),s.classList.add("select-hide"),o.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}))}const newCustomSelects=document.querySelectorAll(".new__custom-select");function closeAllSelectsExcept(e){newCustomSelects.forEach(t=>{t!==e&&t.classList.contains("open")&&t.classList.remove("open")})}newCustomSelects.forEach(e=>{const t=e.querySelector(".new__custom-select__trigger"),o=e.querySelector(".new__custom-options"),s=e.querySelectorAll(".new__custom-option"),c=e.querySelector(".custom-scrollbar"),n=document.createElement("div");function l(){const e=o.scrollTop,t=o.clientHeight,s=o.scrollHeight,l=c.clientHeight,i=Math.max(t/s*l,20),r=e/(s-t)*(l-i);n.style.height=i+"px",n.style.top=r+"px"}n.classList.add("custom-scrollbar-thumb"),c.appendChild(n),t.addEventListener("click",()=>{e.classList.contains("open")?e.classList.remove("open"):(closeAllSelectsExcept(e),e.classList.add("open"))}),o.addEventListener("scroll",l),s.forEach(t=>{t.addEventListener("click",o=>{if(e.closest(".skills-filter-select")){const o=e.querySelectorAll(".new__custom-option.selected"),s=Array.from(o).map(e=>e.getAttribute("data-value")),c=t.getAttribute("data-value"),n=e.querySelector(".new__custom-select__trigger"),l=e.closest(".new__custom-select-wrapper").querySelector(".skills-tags-list");if(s.includes(c))return;const i=document.createElement("div");i.classList.add("tag-item");const r=document.createElement("p");r.textContent=t.textContent;const p=document.createElement("button");p.classList.add("remove"),i.appendChild(r),i.appendChild(p),l.appendChild(i),addRemoveButtonListener(p),t.classList.add("selected"),n.textContent="Selected"}else{t.getAttribute("data-value");const o=e.querySelector(".new__custom-select__trigger");e.closest(".acievements-select")?o.textContent="icon":o.textContent=t.textContent,e.classList.remove("open"),e.classList.contains("filter-select-scroll")&&(e.classList.add("open"),o.textContent="Selected")}})}),n.addEventListener("mousedown",e=>{const t=e.clientY-n.getBoundingClientRect().top,s=c.clientHeight-n.clientHeight;function l(e){const l=e.clientY-c.getBoundingClientRect().top-t;l<0?(n.style.top="0",o.scrollTop=0):l>s?(n.style.top=s+"px",o.scrollTop=o.scrollHeight):(n.style.top=l+"px",o.scrollTop=l/s*(o.scrollHeight-o.clientHeight))}window.addEventListener("mousemove",l),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",e)}))}),l()});