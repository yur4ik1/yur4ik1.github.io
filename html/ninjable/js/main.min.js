const addBtns=document.querySelectorAll(".user-add"),levelsPopup=document.querySelector(".level__popup"),openLevelsPopup=document.querySelector(".add-level"),levelPopupClose=document.querySelector(".level-close");function addPopupButtonsListeners(){document.querySelectorAll(".level__popup-form button").forEach(e=>{let t=0,s=null;e.addEventListener("click",()=>{t++,2===t&&e.classList.contains("active")?(s=document.createElement("div"),s.classList.add("delete-level-popup"),s.innerHTML="<p>Level can't be deactivated until you have at least one active user with this level.</p>",s.style.position="absolute",s.style.top=(e.offsetTop+e.offsetHeight)/window.innerHeight*55+"%",s.style.right=(window.innerWidth-e.offsetLeft)/window.innerWidth*55+"%",e.parentNode.insertBefore(s,e.nextSibling),t=0):e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}),document.addEventListener("click",t=>{!s||e.contains(t.target)||s.contains(t.target)||(s.remove(),s=null)})})}levelsPopup&&openLevelsPopup&&(openLevelsPopup.addEventListener("click",()=>{levelsPopup.classList.add("active")}),levelPopupClose.addEventListener("click",()=>{levelsPopup.classList.remove("active")}));const inputs=document.querySelectorAll(".department-field");if(inputs.length>0){const e=inputs[0].placeholder.length+9;inputs.forEach(t=>{let s=e;t.style.width=.5*s+"vw",t.addEventListener("input",()=>{s=Math.max(e,t.value.length+9),t.style.width=.5*s+"vw"})})}const sidemenuItem=document.querySelectorAll(".sidemenu__item");sidemenuItem&&sidemenuItem.forEach(e=>{e.addEventListener("click",(function(){sidemenuItem.forEach(e=>e.classList.remove("active")),this.classList.add("active")}))});const popupUsers=document.querySelector(".add-users"),addUserBtn=document.querySelector(".add-user-btn"),userPopupClose=document.querySelector(".ninjable__popup-close");popupUsers&&addUserBtn&&(addUserBtn.addEventListener("click",()=>{popupUsers.classList.add("active")}),userPopupClose.addEventListener("click",()=>{popupUsers.classList.remove("active")}));const popupEditUsers=document.querySelector(".edit-users"),addEditUserBtns=document.querySelectorAll(".edit"),EdituserPopupClose=document.querySelector(".edit-close");popupEditUsers&&addEditUserBtns&&(addEditUserBtns.forEach(e=>{e.addEventListener("click",()=>{popupEditUsers.classList.add("active")})}),EdituserPopupClose.addEventListener("click",()=>{popupEditUsers.classList.remove("active")}));const popupSkillsLevel=document.querySelector(".add-skillss-level"),addSkillsBtns=document.querySelectorAll(".add-skills"),skillsPopupClose=document.querySelector(".ninjable__popup-close");popupSkillsLevel&&addSkillsBtns.length>0&&(addSkillsBtns.forEach(e=>{e.addEventListener("click",()=>{popupSkillsLevel.classList.add("active")})}),skillsPopupClose.addEventListener("click",()=>{popupSkillsLevel.classList.remove("active")}));const editLevelPopup=document.querySelector(".edit-skillss-level"),editLevelBtn=document.querySelectorAll(".edit-job-btn"),skillsAddClose=document.querySelector(".edit-close");editLevelPopup&&editLevelBtn.length>0&&(editLevelBtn.forEach(e=>{e.addEventListener("click",()=>{editLevelPopup.classList.add("active")})}),skillsAddClose.addEventListener("click",()=>{editLevelPopup.classList.remove("active")}));const addSkillPopup=document.querySelector(".add-skillss-popup"),addSkillBtn=document.querySelectorAll(".add-skill-btn"),closeAddSkill=document.querySelector(".add-skill-close");addSkillPopup&&addSkillBtn.length>0&&(addSkillBtn.forEach(e=>{e.addEventListener("click",()=>{addSkillPopup.classList.add("active")})}),closeAddSkill.addEventListener("click",()=>{addSkillPopup.classList.remove("active"),clearForm();const e=document.querySelector(".add-new__custom-select-wrapper").querySelector(".skills-tags-list");for(;e.hasChildNodes();)e.removeChild(e.firstChild)}));const editSkillPopup=document.querySelector(".edit-skillss-popup"),editSkillBtn=document.querySelectorAll(".edit-skill-btn"),closeEditSkill=document.querySelector(".edit-skill-close");editSkillPopup&&editSkillBtn.length>0&&(editSkillBtn.forEach(e=>{e.addEventListener("click",()=>{editSkillPopup.classList.add("active")})}),closeEditSkill.addEventListener("click",()=>{editSkillPopup.classList.remove("active")}));const skillsIcos=document.querySelectorAll(".skills-info"),skillsInfoPopups=document.querySelectorAll(".info-popup");skillsIcos.length>0&&skillsInfoPopups.length>0&&skillsIcos.forEach((e,t)=>{const s=skillsInfoPopups[t];e.addEventListener("click",()=>{s.classList.add("active"),setTimeout(()=>{s.classList.remove("active")},3e3)})});const addBadgePopup=document.querySelector(".add-badge-popup"),addBadgeBtn=document.querySelectorAll(".add-badge-btn"),addBadgeClose=document.querySelector(".add-badge-close");addBadgePopup&&addBadgeBtn.length>0&&(addBadgeBtn.forEach(e=>{e.addEventListener("click",()=>{addBadgePopup.classList.add("active")})}),addBadgeClose.addEventListener("click",()=>{addBadgePopup.classList.remove("active")}));const labels=document.querySelectorAll(".info");labels.forEach(e=>{e.addEventListener("click",()=>{const t=e.querySelector(".badge__info-popup");t.classList.add("active"),setTimeout(()=>{t.classList.remove("active")},3e3)})});const acievementsTitleIco=document.querySelector(".acievements-info"),acievementsTitlePopup=document.querySelector(".acievements-title");acievementsTitleIco&&acievementsTitlePopup&&(acievementsTitleIco.addEventListener("click",()=>{acievementsTitlePopup.classList.toggle("active")}),document.addEventListener("click",e=>{e.target.closest(".acievements-title")||e.target.closest(".acievements-info")||acievementsTitlePopup.classList.remove("active")}));const addRewardPopup=document.querySelector(".add-reward-popup"),addRewardBtn=document.querySelectorAll(".add-revard-btn"),addRewardClose=document.querySelector(".add-revard-close");addRewardPopup&&addRewardBtn.length>0&&(addRewardBtn.forEach(e=>{e.addEventListener("click",()=>{addRewardPopup.classList.add("active")})}),addRewardClose.addEventListener("click",()=>{addRewardPopup.classList.remove("active")}));const editRewardPopup=document.querySelector(".edit-reward-popup"),editRewardBtn=document.querySelectorAll(".edit"),editRewardClose=document.querySelector(".edit-revard-close");editRewardPopup&&editRewardBtn.length>0&&(editRewardBtn.forEach(e=>{e.addEventListener("click",()=>{editRewardPopup.classList.add("active")})}),editRewardClose.addEventListener("click",()=>{editRewardPopup.classList.remove("active")}));const answerPopup=document.querySelector(".answer-popup"),answerBtn=document.querySelectorAll(".answer"),answerClose=document.querySelector(".answer__popup-close");answerPopup&&answerBtn.length>0&&(answerBtn.forEach(e=>{e.addEventListener("click",()=>{answerPopup.classList.add("active")})}),answerClose.addEventListener("click",()=>{answerPopup.classList.remove("active")}));const requestEditPopup=document.querySelector(".answer-edit"),requestEditBtn=document.querySelectorAll(".edit"),requestEditClose=document.querySelector(".answer-edit-close");requestEditPopup&&requestEditBtn.length>0&&(requestEditBtn.forEach(e=>{e.addEventListener("click",()=>{requestEditPopup.classList.add("active")})}),requestEditClose.addEventListener("click",()=>{requestEditPopup.classList.remove("active")}));const profileBtn=document.querySelector(".header__avatar"),profilePopup=document.querySelector(".header__profile-popup");function archiveButton(){document.querySelectorAll(".delete-icon, .archive").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const s=e.closest(".row-item"),c=document.createElement("div");c.classList.add("alert-popup"),c.innerHTML='\n      <p>Are you sure?</p>\n      <div class="btns">\n        <button class="true">Yes</button>\n        <button class="false">No</button>\n      </div>\n    ',s.appendChild(c);const o=c.querySelector(".true"),l=c.querySelector(".false");o.addEventListener("click",async()=>{const t=parseInt(e.getAttribute("data-id")),s=formPopupLevels.querySelectorAll("button"),c=[];for(let e=0;e<s.length;e++)c.push({id:parseInt(s[e].getAttribute("data-id")),is_active:s[e].classList.contains("active")});c.find(e=>e.id===t).is_active=!1;const o={method:"POST",headers:{"Content-Type":"application/json","x-hasura-admin-secret":HASURA_KEY},body:JSON.stringify({query:"\n            mutation LevelsMutation($l1: Boolean, $l2: Boolean, $l3: Boolean, $l4: Boolean, $l5: Boolean, $l6: Boolean) {\n            update_levels_many (\n                updates: [\n                {\n                    where: {id: {_eq: 1}},\n                    _set: {is_active: $l1}\n                },\n                {\n                    where: {id: {_eq: 2}},\n                    _set: {is_active: $l2}\n                },\n                {\n                    where: {id: {_eq: 3}},\n                    _set: {is_active: $l3}\n                },\n                {\n                    where: {id: {_eq: 4}},\n                    _set: {is_active: $l4}\n                },\n                {\n                    where: {id: {_eq: 5}},\n                    _set: {is_active: $l5}\n                },\n                {\n                    where: {id: {_eq: 6}},\n                    _set: {is_active: $l6}\n                },\n                ]\n            ) {\n                affected_rows\n            }\n            }",variables:{l1:c[0].is_active,l2:c[1].is_active,l3:c[2].is_active,l4:c[3].is_active,l5:c[4].is_active,l6:c[5].is_active}})},l=await fetch(BaseUrl,o);await l.json();renderLevels()}),l.addEventListener("click",()=>{c.remove()})})});const e=document.querySelector(".skills-archive"),t=document.querySelector(".skills__archive-popup"),s=document.querySelector(".skills__alert-popup"),c=document.querySelector(".false"),o=document.querySelector(".true");e&&t&&s&&c&&o&&(e.addEventListener("click",e=>{e.preventDefault(),s.classList.add("active"),setTimeout(()=>{t&&t.classList.remove("active")},3e3)}),o.addEventListener("click",()=>{s.classList.remove("active"),t&&t.classList.add("active")}),c.addEventListener("click",()=>{s.classList.remove("active")}))}profileBtn&&profilePopup&&profileBtn.addEventListener("click",()=>{profilePopup.classList.toggle("active")});const periodPopup=document.querySelector(".custom__period-popup"),invoicesBtn=document.querySelector(".invoices-btn"),invoicesCloseBtn=document.querySelector(".custom__period-close");invoicesBtn&&periodPopup&&(invoicesBtn.addEventListener("click",()=>{periodPopup.classList.add("active")}),invoicesCloseBtn&&invoicesCloseBtn.addEventListener("click",()=>{periodPopup.classList.remove("active")}));const paymentCarts=document.querySelectorAll(".payment__method-item"),cancelBtn=document.querySelector(".cancel");paymentCarts.forEach(e=>{e.addEventListener("click",()=>{paymentCarts.forEach(t=>{t!==e&&t.classList.remove("active")}),e.classList.add("active"),cancelBtn.classList.add("active")})});const brandingIco=document.querySelector(".content__section-title.icon"),brandingPopup=document.querySelector(".branding__popup");brandingIco&&brandingPopup&&(brandingIco.addEventListener("click",()=>{brandingPopup.classList.toggle("active")}),document.addEventListener("click",e=>{e.target.closest(".branding__popup")||e.target.closest(".content__section-title.icon")||brandingPopup.classList.remove("active")}));const infoTitle=document.querySelector(".departments-title"),infoPopup=document.querySelector(".info-popup");infoTitle&&infoPopup&&(infoTitle.addEventListener("click",()=>{infoPopup.classList.toggle("active")}),document.addEventListener("click",e=>{e.target.closest(".info-popup")||e.target.closest(".departments-title")||infoPopup.classList.remove("active")})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".department").forEach((function(e){var t=e.querySelector(".edit");t.addEventListener("click",(function(s){s.preventDefault();var c=e.querySelectorAll(".edit"),o=e.querySelectorAll(".department-field");t.classList.contains("active")?(c.forEach((function(e){e.classList.remove("active")})),o.forEach((function(e){e.classList.remove("active")}))):(c.forEach((function(e){e.classList.add("active")})),o.forEach((function(e){e.classList.add("active")})))})),document.addEventListener("click",(function(t){if(!e.contains(t.target)){var s=e.querySelectorAll(".edit"),c=e.querySelectorAll(".department-field");s.forEach((function(e){e.classList.remove("active")})),c.forEach((function(e){e.classList.remove("active")}))}}))}))}));const positionsPopup=document.querySelector(".positions__popup.add-department"),addDepartmentBtns=Array.from(document.querySelectorAll(".add-department-btn")),positionsClose=document.querySelector(".edit-close");positionsPopup&&addDepartmentBtns.length>0&&(addDepartmentBtns.forEach(e=>{e.addEventListener("click",()=>{positionsPopup.classList.add("active")})}),positionsClose&&positionsClose.addEventListener("click",()=>{positionsPopup.classList.remove("active")}));const editJobPopup=document.querySelector(".positions__popup.edit-job"),editJobBtns=Array.from(document.querySelectorAll(".edit-job-btn")),editJobClose=document.querySelector(".edit-job-close");editJobPopup&&editJobBtns.length>0&&(editJobBtns.forEach(e=>{e.addEventListener("click",()=>{editJobPopup.classList.add("active")})}),editJobClose&&editJobClose.addEventListener("click",()=>{editJobPopup.classList.remove("active")}));const subscriptionBtn=document.querySelector(".upgrade__btn"),downgradeBtn=document.querySelector(".downgrade__btn"),subscriptionPopup=document.querySelector(".subscription__popup"),subscriptionClose=document.querySelector(".ninjable__popup-close");subscriptionBtn&&subscriptionPopup&&downgradeBtn&&(subscriptionBtn.addEventListener("click",()=>{subscriptionPopup.classList.toggle("active")}),downgradeBtn.addEventListener("click",()=>{subscriptionPopup.classList.toggle("active")}),subscriptionClose.addEventListener("click",()=>{subscriptionPopup.classList.remove("active")}));const invoices=document.querySelectorAll(".invoices__list-item");for(let e=0;e<invoices.length;e+=2)invoices[e].classList.add("colored");const rowItem=document.querySelectorAll(".row-item");for(let e=0;e<rowItem.length;e+=2)rowItem[e].classList.add("colored");const calendarFrom=document.querySelectorAll(".calendar-from td");calendarFrom&&calendarFrom.forEach(e=>{e.addEventListener("click",(function(){calendarFrom.forEach(e=>e.classList.remove("active")),this.classList.add("active")}))});const calendarTo=document.querySelectorAll(".calendar-to td");calendarTo&&calendarTo.forEach(e=>{e.addEventListener("click",(function(){calendarTo.forEach(e=>e.classList.remove("active")),this.classList.add("active")}))});const fileInput=document.getElementById("upload__file"),popup=document.querySelector(".resize__img-popup"),popupClose=document.querySelector(".resize__img-close");fileInput&&popup&&(fileInput.addEventListener("change",()=>{fileInput.files.length>0?popup.classList.add("active"):popup.classList.remove("active")}),popupClose.addEventListener("click",()=>{popup.classList.remove("active")}));let select=document.querySelector(".filter-select"),selectSelected=select?select.querySelector(".select-selected"):null,selectItems=select?select.querySelector(".select-items"):null;selectSelected&&selectSelected.addEventListener("click",(function(){selectItems&&selectItems.classList.contains("select-hide")?(selectItems.classList.remove("select-hide"),select.classList.add("active")):selectItems&&(selectItems.classList.add("select-hide"),select.classList.remove("active"))}));let selectElements=document.getElementsByClassName("custom-select");for(let e=0;e<selectElements.length;e++){let t=selectElements[e],s=t.getElementsByClassName("select-selected")[0],c=t.getElementsByClassName("select-items")[0],o=c.getElementsByClassName("select-option");s.addEventListener("click",(function(){this.classList.toggle("select-arrow-active"),c.classList.toggle("select-hide"),this.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}));for(let e=0;e<o.length;e++)o[e].addEventListener("click",(function(){let e=this.innerHTML;s.innerHTML=e,s.classList.remove("select-arrow-active"),c.classList.add("select-hide"),s.classList.contains("select-arrow-active")?t.classList.add("active"):t.classList.remove("active")}))}const newCustomSelects=document.querySelectorAll(".new__custom-select");function closeAllSelectsExcept(e){newCustomSelects.forEach(t=>{t!==e&&t.classList.contains("open")&&t.classList.remove("open")})}newCustomSelects.forEach(e=>{e.querySelector(".new__custom-select__trigger");const t=e.querySelector(".new__custom-options"),s=(e.querySelectorAll(".new__custom-option"),e.querySelector(".custom-scrollbar")),c=document.createElement("div");function o(){const e=t.scrollTop,o=t.clientHeight,l=t.scrollHeight,i=s.clientHeight,n=Math.max(o/l*i,20),d=e/(l-o)*(i-n);c.style.height=n+"px",c.style.top=d+"px"}c.classList.add("custom-scrollbar-thumb"),s.appendChild(c),t.addEventListener("scroll",o),c.addEventListener("mousedown",e=>{const o=e.clientY-c.getBoundingClientRect().top,l=s.clientHeight-c.clientHeight;function i(e){const i=e.clientY-s.getBoundingClientRect().top-o;i<0?(c.style.top="0",t.scrollTop=0):i>l?(c.style.top=l+"px",t.scrollTop=t.scrollHeight):(c.style.top=i+"px",t.scrollTop=i/l*(t.scrollHeight-t.clientHeight))}window.addEventListener("mousemove",i),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",e)}))}),o()});const passwordInput=document.getElementById("password"),passwordIcon=document.querySelector(".password-icon");passwordInput&&passwordIcon&&passwordIcon.addEventListener("click",(function(){"password"===passwordInput.type?passwordInput.type="text":passwordInput.type="password"}));const addSkillsTagsList=document.querySelector(".add-skills-tags-list"),customSelectTrigger=document.querySelector(".new__custom-select__trigger");if(addSkillsTagsList&&customSelectTrigger){new MutationObserver(e=>{for(const t of e)"attributes"===t.type&&"class"===t.attributeName&&(addSkillsTagsList.classList.contains("active")?customSelectTrigger.classList.add("hidden"):customSelectTrigger.classList.remove("hidden"),customSelectTrigger.classList.contains("open")?selectOpenBtn.classList.add("active"):selectOpenBtn.classList.remove("active"))}).observe(addSkillsTagsList,{attributes:!0}),addSkillsTagsList.classList.contains("active")&&customSelectTrigger.classList.add("hidden")}